<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skparab1 - Wordle</title>
    <style>
          body {background-color: rgb(0, 0, 0);}
      body {
        margin: 0;
        overflow: hidden;
      }

      h1{
        color:rgb(200, 200, 200);
      }

      ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        background-color: #555555;
      }
      li {
        display: inline;
        float: left;
      }
      li a {
        display: block;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
      }

      li a:hover {
        background-color: #f78a41;
      }

      .center {
        margin: auto;
        width: 50%;
        border: 3px solid green;
        padding: 10px;
      }

    </style>
  </head>
  <body>
    <ul>
      <li><a href="https://skparab1.github.io/images">Home</a></li>
      <li><a href="https://skparab1.github.io/images/gallery">Daily</a></li>
      <li><a href="https://skparab1.github.io/images/about">New</a></li>
    </ul> 

    <h1>Skparab1 Wordle</h1>

    <canvas class="myCanvas">
      <p>Add suitable fallback here.</p>
      <canvas id="the-canvas" width="320" height="240" style="position:relative; right:300px;"></canvas>
    </canvas>

    <script>

      const canvas = document.querySelector('.myCanvas');
      const width = canvas.width = window.innerWidth/2+window.innerWidth/4; 
      const height = canvas.height = window.innerHeight;
      canvas.style.left = "100px";
      canvas.style.top = "100px";

      let xcenter = window.innerWidth/2;
      var activecanvas = [xcenter-xcenter/2,0,xcenter,window.innerHeight];
      var totaluiwidth = xcenter/2
      var oldline1 = [];
      var lkey = '';
      var checked = true;
      var next = false;
      var currentline = 1;
      var line1 = [];
      var line2 = [];
      var line3 = [];
      var line4 = [];
      var line5 = [];
      var line6 = [];
      var colors1 = ['b','b','b','b','b','b'];
      var colors2 = ['b','b','b','b','b','b'];
      var colors3 = ['b','b','b','b','b','b'];
      var colors4 = ['b','b','b','b','b','b'];
      var colors5 = ['b','b','b','b','b','b'];
      var colors6 = ['b','b','b','b','b','b'];
      var solution = 'PLANE';

      const ctx = canvas.getContext('2d');
      //canvas.getMousePosition
      ctx.fillStyle = 'rgb(125,125,125)';
      //ctx.fillRect(activecanvas[0], activecanvas[1], activecanvas[2], activecanvas[3]);
      ctx.strokeStyle = 'rgb(255,255,255)';

      let h = height/20;
      let ct = 0
      var renderheight = 2*height/18;
      var actnumber = 0
      while (ct < 6){
        let i = 27;
        while (i >= -17){
          ctx.strokeRect(xcenter-totaluiwidth/(2*27)*i,h,50*(width/1024),50*(width/1024));
          if (line1[actnumber]){
            ctx.fillText(line1[0], xcenter-totaluiwidth/(2*27)*i,h);
          }
          //console.log(actnumber,erasev);
          // if (actnumber == erasev){
          //   console.log('erased');
          //   ctx.fillStyle = 'rgb(0,0,0)';
          //   ctx.fillText(eraseltr, xcenter-totaluiwidth/(2*27)*i+5*scalefactor,h+33*scalefactor);
          //   ctx.fillStyle = 'rgb(255,255,255)';
          // }

          i -= 11
          actnumber += 1;
        }
        h = h + 2*height/18;
        ct += 1;
      }
      
      ctx.fillStyle = 'rgb('+200+', '+100+', '+0+')'
      ctx.font = '70px Arial';
      //ctx.fillText(line1[0], 100, 100);

      function degToRad(degrees) {
        return degrees * Math.PI / 180;
      };

      function truelength(lst){
        let i = 0;
        let count = 0;
        while (i < lst.length){
          if (lst[i] != ''){
            count += 1;
          }
          i += 1;
        }

        return count
      }

      function checkmatch(lst,word){
        returnlist = []
        let i = 0;
        console.log(lst,word);
        while (i < 5){
          let subject = lst[i];
          console.log(subject,lst[i]);
          if (word.includes(subject) && subject == word.substring(i,i+1)){
            returnlist.push('match')
          } else if (word.includes(subject)){
            returnlist.push('includes')
          } else {
            returnlist.push('false')
          }
          i +=1 ;
        }
        return returnlist
      }

      ctx.fillStyle = 'rgb('+200+', '+100+', '+0+')'
      ctx.strokeStyle = 'rgb('+200+', '+100+', '+0+')'
      ctx.font = '35px Arial';
      window.addEventListener("keydown", function(event) {

        if (event.defaultPrevented) {
          return;
        }

        const ctx = canvas.getContext('2d');
        
        let actkey = event.code.replace('Key','')
        let filterletters = 'QWERTYUIOPASDFGHJKLZXCVBNM';

        if (actkey == 'Enter'){
          if ((currentline == 1 && truelength(line1) >= 5) || (currentline == 2 && truelength(line2) >= 5) || (currentline == 3 && truelength(line3) >= 5) || (currentline == 4 && truelength(line4) >= 5) || (currentline == 5 && truelength(line5) >= 5) || (currentline == 6 && truelength(line6) >= 6)){
            if (currentline == 1){
              colors1 = checkmatch(line1,solution);
            }
            if (currentline == 2){
              colors2 = checkmatch(line2,solution);
            }
            if (currentline == 3){
              colors3 = checkmatch(line3,solution);
            }
            if (currentline == 4){
              colors4 = checkmatch(line4,solution);
            }
            if (currentline == 5){
              colors5 = checkmatch(line5,solution);
            }
            if (currentline == 6){
              colors6 = checkmatch(line6,solution);
            }
          currentline += 1;
          }
          //ctx.fillText(colors1, 100, 100);
        } else {
          ctx.fillStyle = 'rgb('+255+', '+255+', '+255+')'
          ctx.fillText('Too short', 100, 100);
        }

        if ((currentline == 1 && truelength(line1) < 5) || (currentline == 2 && truelength(line2) < 5) || (currentline == 3 && truelength(line3) < 5) || (currentline == 4 && truelength(line4) < 5) || (currentline == 5 && truelength(line5) < 5) || (currentline == 6 && truelength(line6) < 6)){
          checked = true;
        } else {
          checked = false;
        }

        console.log(currentline, checked);
        
        if (actkey != 'Backspace'){
          if (filterletters.includes(actkey) && checked){
            if (currentline == 1){
              line1.push(actkey);
            }
            if (currentline == 2){
              line2.push(actkey);
            }
            if (currentline == 3){
              line3.push(actkey);
            }
            if (currentline == 4){
              line4.push(actkey);
            }
            if (currentline == 5){
              line5.push(actkey);
            }
            if (currentline == 6){
              line6.push(actkey);
            }
            console.log('pushed',actkey);
            lkey = actkey;
            next = false;
          }
        } else {
          var erasev;
          //line1.pop('Backspace');
          var eraseltr = lkey;
          if (currentline == 1){
            line1.pop(line1.length-1);
            erasev = line1.length;
          }           
          if (currentline == 2){
            line2.pop(line2.length-1);
            erasev = line2.length;
          }
          if (currentline == 3){
            line3.pop(line3.length-1);
            erasev = line3.length;
          }
          if (currentline == 4){
            line4.pop(line4.length-1);
            erasev = line4.length;
          }
          if (currentline == 5){
            line5.pop(line5.length-1);
            erasev = line5.length;
          }
          if (currentline == 6){
            line6.pop(line6.length-1);
            erasev = line6.length;
          }

          console.log('backspaced, print',eraseltr)
          //event.preventDefault();
        }
        console.log('line2:',line2);

        ctx.fillStyle = 'rgb(0,0,0)';
        let line1sizer = (width/1024)*35;
        let scalefactor = width/1024;
        ctx.font = line1sizer+'px Arial';

        let h = height/20;
        let ct = 0
        var renderheight = 2*height/18;
        var actnumber = 0
        var forcewrite = false;
        //ctx.strokeRect(0,0,width,height);
        ctx.fillStyle = 'rgb(255,255,255)';
        //ctx.fillText(line1, 100,100);
        while (ct < 6){
          let i = 27;
          let indexnum = 0;
          while (i >= -17){
            if ((colors1[indexnum] == 'b' && ct == 0) || (colors2[indexnum] == 'b' && ct == 1) || (colors3[indexnum] == 'b' && ct == 2) || (colors4[indexnum] == 'b' && ct == 3) || (colors5[indexnum] == 'b' && ct == 4) || (colors6[indexnum] == 'b' && ct == 5)){
              ctx.strokeStyle = 'rgb(255,255,255)';
              ctx.fillStyle = 'rgb(0,0,0)';
            } else if ((colors1[indexnum] == 'match' && ct == 0) || (colors2[indexnum] == 'match' && ct == 1) || (colors3[indexnum] == 'match' && ct == 2) || (colors4[indexnum] == 'match' && ct == 3) || (colors5[indexnum] == 'match' && ct == 4) || (colors6[indexnum] == 'match' && ct == 5)){
              ctx.strokeStyle = 'rgb(0,200,0)';
              ctx.fillStyle = 'rgb(0,200,0)';
              forcewrite = true;
            } else if ((colors1[indexnum] == 'includes' && ct == 0) || (colors2[indexnum] == 'includes' && ct == 1) || (colors3[indexnum] == 'includes' && ct == 2) || (colors4[indexnum] == 'includes' && ct == 3) || (colors5[indexnum] == 'includes' && ct == 4) || (colors6[indexnum] == 'includes' && ct == 5)){
              ctx.strokeStyle = 'rgb(200,200,0)';
              ctx.fillStyle = 'rgb(200,200,0)';
              forcewrite = true;
            } else if ((colors1[indexnum] == 'false' && ct == 0) || (colors2[indexnum] == 'false' && ct == 1) || (colors3[indexnum] == 'false' && ct == 2) || (colors4[indexnum] == 'false' && ct == 3) || (colors5[indexnum] == 'false' && ct == 4) || (colors6[indexnum] == 'false' && ct == 5)){
              ctx.strokeStyle = 'rgb(200,0,0)';
              ctx.fillStyle = 'rgb(200,0,0)';
              forcewrite = true;
            } else {
              ctx.strokeStyle = 'rgb(255,255,255)';
              ctx.fillStyle = 'rgb(0,0,0)';
            }
            
            indexnum += 1;
            if (colors1[indexnum] != 'b' && currentline == ct+2){
              //ctx.delay(100);
              ctx.strokeStyle = ctx.fillStyle;
              //ctx.strokeRect(xcenter-totaluiwidth/(2*27)*i,h+2*(currentline-1)*height/18,50*(width/1024),50*(width/1024));
              ctx.fillRect(xcenter-totaluiwidth/(2*27)*i+2,h+45*(width/1024),50*(width/1024)-4,7*(width/1024));
            } else {
              ctx.strokeStyle = 'rgb(0,0,0)';
              //ctx.fillRect(xcenter-totaluiwidth/(2*27)*i+2,h+45*(width/1024),50*(width/1024)-4,7*(width/1024));
            }
            ctx.fillStyle = 'rgb(255,255,255)';
            ctx.strokeStyle = 'rgb(255,255,255)';
            console.log('written');

            if (currentline != ct + 1 && indexnum == 5){
              //break;
            }
            if (currentline == 1 && line1[actnumber]){
              ctx.fillText(line1[actnumber], xcenter-totaluiwidth/(2*27)*i+5*scalefactor,h+33*scalefactor);
            }
            console.log(currentline,line2);
            if (currentline == 2 && line2[actnumber] != undefined){
              ctx.fillStyle = 'rgb(255,255,255)';
              console.log(line2[actnumber]);
              ctx.fillText(line2[actnumber], xcenter-totaluiwidth/(2*27)*i+5*scalefactor,h+3*33*scalefactor);
            }
            if (currentline == 3 && line3[actnumber] != undefined){
              ctx.fillText(line3[actnumber], xcenter-totaluiwidth/(2*27)*i+5*scalefactor,h+5*33*scalefactor);
              console.log(line3[actnumber]);
            }
            if (currentline == 4 && line4[actnumber] != undefined){
              ctx.fillText(line4[actnumber], xcenter-totaluiwidth/(2*27)*i+5*scalefactor,h+6.75*33*scalefactor);
              console.log(line4[actnumber]);
            }
            if (currentline == 5 && line5[actnumber] != undefined){
              ctx.fillText(line5[actnumber], xcenter-totaluiwidth/(2*27)*i+5*scalefactor,h+8.5*33*scalefactor);
              console.log(line5[actnumber]);
            }
            if (currentline == 6 && line6[actnumber] != undefined){
              ctx.fillText(line6[actnumber], xcenter-totaluiwidth/(2*27)*i+5*scalefactor,h+10*33*scalefactor);
              console.log(line6[actnumber]);
            }
            if (actnumber == erasev){
              ctx.font = line1sizer+'px Arial';
              console.log('erased');
              ctx.fillStyle = 'rgb(0,0,0)';
              ctx.fillRect(xcenter-totaluiwidth/(2*27)*i,h+2*(currentline-1)*height/18,50*(width/1024),50*(width/1024));
              ctx.fillStyle = 'rgb(255,255,255)';
            }
            i -= 11
            actnumber += 1;
          }
          forcewrite = false;
          h = h + 2*height/18;
          ct += 1;
        }

        if (line1.length % 5 == 0){
          ctx.fillStyle = 'rgb(200,200,200)';
          //ctx.fillRect(xcenter+totaluiwidth/(2*27)*30,(h/10+2*height/18*(line1.length/5-1)),100*(width/1024),50*(width/1024));
        } else {
          ctx.fillStyle = 'rgb(0,0,0)';
          //ctx.fillRect(xcenter+totaluiwidth/(2*27)*30,h,100*(width/1024),50*(width/1024));
        }

        //event.preventDefault();
        }, true);

      while (line1.includes('')){
        line1.pop('');
      }
      oldline1 = line1;

    </script>

    <script type="text/javascript">

      function getMousePosition(canvas, event) {
          let rect = canvas.getBoundingClientRect();
          let x = event.clientX - rect.left;
          let y = event.clientY - rect.top;
          console.log("Coordinate x: " + x, 
                      "Coordinate y: " + y);
          // these are clickables
          if (x >= 110 && x <= 340 && y >= 180 && y <= 240){
            //window.open('https://skparab1.github.io/login/auth=false&pwdchallenge=true&goto=skparab1.github.io&s&homepage',"_self")
          }
          if (x >= 388 && x <= 612 && y >= 180 && y <= 240){
            //window.open('https://skparab1.github.io/search/&software=false&article=false',"_self")
          }
          // if (x >= 110 && x <= 340 && y >= 180 && y <= 240){
          //   window.open('https://skparab1.github.io/login/auth=false&pwdchallenge=true&goto=skparab1.github.io&s&homepage',"_self")
          // }
      }

      let canvasElem = document.querySelector("canvas");
        
      canvasElem.addEventListener("mousedown", function(e)
      {
          getMousePosition(canvasElem, e);
      });
    </script>
    <h1 style="color:rgb(225, 252, 71);"></h1> Skparab1 Software</h1>
    <h1 style="color:rgb(225, 252, 71);"></h1> hello</h1>
    <h1 style="color:rgb(225, 252, 71);"> test</h1>
    <h1 style="color:rgb(225, 252, 71);"></h1> Skparab1 Software</h1>
  </body>
</html>